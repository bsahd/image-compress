# Example files

- colorbar.png - color bar from https://commons.wikimedia.org/wiki/File:ARIB_COLOR_BAR_100.png
- colorbar.bin.xz - generated by `lua lua/compress.lua 16 colorbar.png colorbar.bin` and `xz colorbar.bin -9ev`
- colorbar2.png - generated by `lua lua/decompress.lua colorbar.bin colorbar2.png`
<!-- ./lua/compress.lua 16 colorbar.png - | tee colorbar.bin | ./lua/decompress.lua - colorbar2.png && xz colorbar.bin -9efv -->

# Usage
## JS Version
requires sharp.
- Encode: `$ node js/index.js /path/to/source output.bin -l COMPRESSION_LEVEL`
  - COMPRESSION_LEVEL is number between 1~255
- Decode: `$ node js/recov.js output.bin target.png`
## Lua Version
requires Lua 5.4.8 and lua-vips.
- Encode: `$ lua lua/compress.lua COMPRESSION_LEVEL /path/to/source output.bin`
  - COMPRESSION_LEVEL is number between 1~255
- Decode: `$ lua lua/decompress.lua output.bin target.png`

# General mechanism

1. Generate a file that is easy to compress by making full use of differences, etc.
2. The user compresses it with xz
